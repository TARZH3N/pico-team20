References:
https://github.com/seemoo-lab/pico-nexmon/
https://github.com/seemoo-lab/nexmon

Use ubuntu 22.04.3:

sudo apt update

sudo apt upgrade (restart every service)

sudo apt install -y git

git clone --recursive https://github.com/seemoo-lab/pico-nexmon.git

cd pico-nexmon/patches

wget https://raw.githubusercontent.com/seemoo-lab/pico-nexmon/ee955dfbc44d807a99ac3b9ecffdc36e66d3725d/patches/002_cyw43-add_monitor_mode_support.patch

cd ..

nano script/patch

add in:
```
pwd

PATCH_002="$PATCH_DIR/002_cyw43-add_monitor_mode_support.patch"

# check if patch 002 exists
if ! [ -f $PATCH_002 ]; then
    printf "Patchfile 2 not found, expected: %s\n" $PATCH_002
    exit 2
fi

# apply patch 002
printf "applying patch %s\n" $PATCH_002
cd $CYW43_DRIVER_DIR && git apply ../$PATCH_002 && cd ..
```

./script/patch

./script/setup_pico (Comment out cdrom in sudo nano /etc/apt/sources.list if got error)

./script/setup_nexmon

source ~/.bashrc

mkdir monitor_mode

cd monitor_mode

wget https://raw.githubusercontent.com/seemoo-lab/pico-nexmon/9ac9df13f4500a0493957707ea4120bfe770c4d6/monitor_mode/CMakeLists.txt

nano CMakeLists.txt

uncomment target_compile_definitions

pico_enable_stdio_usb(picow_monitor_mode TRUE)
pico_enable_stdio_uart(picow_monitor_mode TRUE)

wget https://raw.githubusercontent.com/seemoo-lab/pico-nexmon/9ac9df13f4500a0493957707ea4120bfe770c4d6/monitor_mode/lwipopts.h

wget https://raw.githubusercontent.com/raspberrypi/pico-examples/master/pico_w/wifi/lwipopts_examples_common.h

wget https://raw.githubusercontent.com/seemoo-lab/pico-nexmon/9ac9df13f4500a0493957707ea4120bfe770c4d6/monitor_mode/picow_monitor_mode.c

cd ..

nano CMakeLists.txt

add_subdirectory(monitor_mode)

mkdir build

cd build

cmake ..

make


Setup ubuntu gui:

sudo apt install slim

sudo apt install ubuntu-desktop

sudo service slim start
